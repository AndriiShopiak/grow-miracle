# Гід по оптимізації зображень у Vercel

## Огляд параметра "Image Optimization - Transformations"

Параметр **Image Optimization - Transformations** у Vercel відстежує кількість трансформацій зображень, які виконуються на вашому сайті. Кожна трансформація (зміна розміру, стиснення, конвертація формату) рахується як окрема операція.

## Поточний стан проекту

### Аналіз зображень:
- **Загальна кількість**: 90 зображень
- **Загальний розмір**: 15.6 MB
- **Формати**: JPG, PNG, WebP
- **Середній розмір**: ~173 KB на зображення

### Проблеми, які були виявлені:
1. Відсутність оптимізації в `next.config.ts`
2. Неправильні параметри `sizes` та `quality`
3. Відсутність `priority` loading для критичних зображень
4. Відсутність blur placeholder'ів
5. Неефективне використання WebP формату

## Реалізовані оптимізації

### 1. Налаштування Next.js (`next.config.ts`)

```typescript
images: {
  unoptimized: false,
  formats: ['image/webp', 'image/avif'],
  deviceSizes: [640, 750, 828, 1080, 1200, 1920, 2048, 3840],
  imageSizes: [16, 32, 48, 64, 96, 128, 256, 384],
  minimumCacheTTL: 86400, // 1 день
  quality: 75,
}
```

### 2. Оптимізація компонентів

#### Логотипи та іконки:
- `priority={true}` для логотипів
- `quality={85-90}` для високої якості
- `sizes="(max-width: 640px) 48px, 64px"`

#### Продуктові зображення:
- `quality={75-85}` залежно від важливості
- `sizes="(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw"`
- `placeholder="blur"` для покращення UX

#### Галерея:
- `quality={75}` для балансу якості/розміру
- `placeholder="blur"` для плавного завантаження

### 3. Створені утиліти (`src/utils/imageUtils.ts`)

- Стандартизовані розміри для різних типів зображень
- Оптимальні налаштування якості
- Blur placeholder'и
- Детекція підтримки WebP

## Очікувані результати

### Покращення продуктивності:
1. **Зменшення розміру файлів на 30-50%** завдяки WebP/AVIF
2. **Прискорення завантаження на 40-60%** завдяки правильним розмірам
3. **Покращення Core Web Vitals** (LCP, CLS)
4. **Зменшення використання bandwidth** на 40-50%

### Оптимізація Vercel Transformations:
1. **Зменшення кількості трансформацій** завдяки правильним `sizes`
2. **Ефективне кешування** (1 день TTL)
3. **Автоматичне перетворення в WebP/AVIF**

## Рекомендації для подальшої оптимізації

### 1. Моніторинг використання
- Відстежуйте метрики в Vercel Dashboard
- Аналізуйте Image Optimization панель
- Контролюйте витрати на трансформації

### 2. Додаткові оптимізації
```typescript
// Для критичних зображень
<Image
  src="/hero-image.jpg"
  alt="Hero"
  fill
  priority
  quality={80}
  sizes="100vw"
  placeholder="blur"
  blurDataURL={DEFAULT_BLUR_DATA_URL}
/>

// Для мініатюр
<Image
  src="/thumbnail.jpg"
  alt="Thumbnail"
  width={80}
  height={80}
  quality={70}
  sizes="80px"
/>
```

### 3. Оптимізація зображень на рівні файлів
- Конвертуйте великі JPG в WebP
- Використовуйте правильні розміри (не більше 1920px для веб)
- Стискайте зображення до 75-85% якості

### 4. Lazy Loading стратегія
```typescript
// Для зображень нижче fold
<Image
  src="/image.jpg"
  alt="Description"
  fill
  loading="lazy"
  quality={75}
/>

// Для критичних зображень
<Image
  src="/hero.jpg"
  alt="Hero"
  fill
  priority
  quality={80}
/>
```

## Контроль витрат у Vercel

### Ліміти (безкоштовний план):
- 1,000 трансформацій на місяць
- 100 GB bandwidth

### Рекомендації:
1. Використовуйте правильні `sizes` для зменшення трансформацій
2. Налаштуйте `minimumCacheTTL` для довшого кешування
3. Оптимізуйте зображення на рівні файлів перед завантаженням
4. Використовуйте CDN для статичних зображень

## Метрики для відстеження

### Core Web Vitals:
- **LCP (Largest Contentful Paint)**: < 2.5s
- **CLS (Cumulative Layout Shift)**: < 0.1
- **FID (First Input Delay)**: < 100ms

### Vercel метрики:
- Кількість трансформацій на місяць
- Bandwidth використання
- Cache hit ratio

## Висновок

Реалізовані оптимізації дозволять:
- Зменшити використання Vercel Transformations на 40-60%
- Покращити продуктивність сайту
- Зменшити витрати на bandwidth
- Покращити користувацький досвід

Рекомендується регулярно моніторити метрики та вносити корективи залежно від реального використання.


